[gd_scene load_steps=23 format=2]

[ext_resource path="res://FireHazard.png" type="Texture" id=1]
[ext_resource path="res://Circle.png" type="Texture" id=2]
[ext_resource path="res://StripeBG.png" type="Texture" id=3]
[ext_resource path="res://Menu.gd" type="Script" id=4]
[ext_resource path="res://Poppins-SemiBold.ttf" type="DynamicFontData" id=5]
[ext_resource path="res://SFX/awake10_megaWall.ogg" type="AudioStream" id=6]

[sub_resource type="Shader" id=17]
code = "shader_type canvas_item;

uniform float scroll_speed = 0.08;
//uniform vec2 texture_scroll = vec2(1.0, 0.0);

void fragment()
{
    vec2 uv = UV;
    uv.x = UV.x * 1.0 + pow(abs(sin(3.14 * UV.x/2.0)),2.0);
    
    //COLOR = texture(TEXTURE, uv + texture_scroll);
    COLOR = texture(TEXTURE, uv + (scroll_speed * TIME));
}"

[sub_resource type="ShaderMaterial" id=18]
shader = SubResource( 17 )
shader_param/scroll_speed = 0.129

[sub_resource type="Animation" id=19]
resource_name = "Go"
length = 40.0
loop = true
step = 1.0
tracks/0/type = "value"
tracks/0/path = NodePath("TextureRect:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 10, 20, 30 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 0,
"values": [ Color( 1, 0.443137, 0.443137, 1 ), Color( 0.968627, 1, 0.443137, 1 ), Color( 0.443137, 1, 0.67451, 1 ), Color( 0.443137, 0.490196, 1, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("TextureRect:rect_rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 20 ),
"transitions": PoolRealArray( -2, -2 ),
"update": 0,
"values": [ 3.47537, -3.6 ]
}

[sub_resource type="Animation" id=20]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("TextureRect:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 1, 0.443137, 0.443137, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("TextureRect:rect_rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 3.47537 ]
}

[sub_resource type="CanvasItemMaterial" id=21]
blend_mode = 1

[sub_resource type="Curve" id=22]
min_value = -200.0
max_value = 200.0
_data = [ Vector2( 0, 1 ), 0.0, 0.0, 0, 0, Vector2( 0.380597, -69.0909 ), 0.0, 0.0, 0, 0, Vector2( 0.731343, 72.7273 ), 0.0, 0.0, 0, 0, Vector2( 1, 1 ), 0.0, 0.0, 0, 0 ]

[sub_resource type="Curve" id=23]
_data = [ Vector2( 0, 1 ), 0.0, 1.4, 0, 0, Vector2( 1, 0 ), 0.0, 0.0, 0, 0 ]

[sub_resource type="Gradient" id=24]
colors = PoolColorArray( 1, 0, 0.609375, 1, 0.0801697, 0, 0.277344, 1 )

[sub_resource type="DynamicFont" id=27]
size = 32
font_data = ExtResource( 5 )

[sub_resource type="StyleBoxEmpty" id=28]

[sub_resource type="StyleBoxEmpty" id=29]

[sub_resource type="StyleBoxEmpty" id=30]

[sub_resource type="StyleBoxEmpty" id=31]

[sub_resource type="StyleBoxEmpty" id=32]

[sub_resource type="Animation" id=25]
resource_name = "In"
length = 3.0
tracks/0/type = "value"
tracks/0/path = NodePath(".:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 0.287175, 1 ),
"update": 0,
"values": [ Vector2( 0, 0 ), Vector2( 0.508123, 0.508123 ) ]
}

[sub_resource type="Animation" id=26]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector2( 0.508123, 0.508123 ) ]
}

[node name="Menu" type="Node2D"]
script = ExtResource( 4 )

[node name="Background" type="CanvasLayer" parent="."]
layer = -1
follow_viewport_enable = true

[node name="ColorRect" type="ColorRect" parent="Background"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -117.0
margin_top = -171.0
margin_right = 207.0
margin_bottom = 95.0
rect_rotation = 3.51141
mouse_filter = 2
color = Color( 0.0117647, 0.219608, 0.270588, 1 )

[node name="TextureRect" type="TextureRect" parent="Background"]
modulate = Color( 1, 0.443137, 0.443137, 1 )
self_modulate = Color( 1, 1, 1, 0.192157 )
material = SubResource( 18 )
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -146.27
margin_top = -133.896
margin_right = 171.73
margin_bottom = 152.104
rect_rotation = 3.47537
rect_pivot_offset = Vector2( 754, 328 )
mouse_filter = 2
texture = ExtResource( 3 )
expand = true
stretch_mode = 2

[node name="Anim" type="AnimationPlayer" parent="Background"]
autoplay = "Go"
anims/Go = SubResource( 19 )
anims/RESET = SubResource( 20 )

[node name="Particles" type="CPUParticles2D" parent="Background"]
material = SubResource( 21 )
position = Vector2( 593, 429 )
amount = 37
lifetime = 5.33
texture = ExtResource( 2 )
emission_shape = 2
emission_rect_extents = Vector2( 622, 1 )
gravity = Vector2( 0, -48 )
tangential_accel = -51.35
tangential_accel_random = 1.0
tangential_accel_curve = SubResource( 22 )
scale_amount = 0.03
scale_amount_random = 0.1
scale_amount_curve = SubResource( 23 )
color = Color( 0.470588, 0, 1, 0.258824 )
color_ramp = SubResource( 24 )

[node name="Play" type="Button" parent="."]
margin_left = 756.0
margin_top = 90.0
margin_right = 1077.0
margin_bottom = 157.0
mouse_default_cursor_shape = 2
custom_fonts/font = SubResource( 27 )
custom_styles/hover = SubResource( 28 )
custom_styles/pressed = SubResource( 29 )
custom_styles/focus = SubResource( 30 )
custom_styles/disabled = SubResource( 31 )
custom_styles/normal = SubResource( 32 )
text = "ENDLESS"

[node name="Story" type="Button" parent="."]
margin_left = 749.0
margin_top = 202.0
margin_right = 1082.0
margin_bottom = 269.0
mouse_default_cursor_shape = 2
custom_fonts/font = SubResource( 27 )
custom_styles/hover = SubResource( 28 )
custom_styles/pressed = SubResource( 29 )
custom_styles/focus = SubResource( 30 )
custom_styles/disabled = SubResource( 31 )
custom_styles/normal = SubResource( 32 )
text = "STORY (TUTORIAL)"

[node name="Logo" type="Node2D" parent="."]

[node name="FireHazard" type="Sprite" parent="Logo"]
position = Vector2( 374, 182 )
scale = Vector2( 0.508123, 0.508123 )
texture = ExtResource( 1 )

[node name="Anim" type="AnimationPlayer" parent="Logo/FireHazard"]
autoplay = "In"
anims/In = SubResource( 25 )
anims/RESET = SubResource( 26 )

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 6 )
pitch_scale = 0.58
autoplay = true
bus = "Reverb"

[connection signal="pressed" from="Play" to="." method="endless"]
[connection signal="pressed" from="Story" to="." method="story"]
